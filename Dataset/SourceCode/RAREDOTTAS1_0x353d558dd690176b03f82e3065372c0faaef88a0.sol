/**
..................................:+@+%#.................::[emailÂ protected]=+%%+-::................................................
                                  +%::-@.             ......=%-.::.:=+#+-          ...                                  
                                 +#:=::%+     .:=+++++++==+++*#*..::::.:-**--+***+++++++=++++-.                         
                                +#:*-::=@ -=+*=-:..:::::::::::::-::::::::..-:...:::::::::.. =@=                         
                               :@.-:::::@#=..::::::::::::::-+#-::::::::::::::::::::::::::..#*.                          
                           %**=*# :::::: .:::::::::::::::::::-#-:::::::::::::::::::::::: +@:                            
                          *% .=@-.:::::::::--:::::::::::::::::-::::::::::::::::::::::::.-##%##*=                        
                          %- ::..::::::::::=+*#*-:::::::::::::::::::::::::::::::::::::::::::-==+++++-.                  
                          @-.::::::::::::::::::-::::::::::::::::::::::::::::::::::::::::::::::::.. .-+##=               
                          @..:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::.:%#              
                       .@#+-=+=++++++*+**+*+*+++++==---::::::::::::::::::::::::::::::::::::::::::::::+%#-               
                       +#  .....................::---===++++**+***++==---::::::::::::::::::::::::::::+*#**=.            
                       @. .........................................-==+*******+==:::::::::::::::::::::::::=@%           
                      #*..::----------::::::::::.:...........................:--=++*+*+=-:::::::::::::::-*#=            
                     =@:.::-----------------------------------::::....................:-=++**+=-:::::::-*%*:            
                    .@=.::------------------------------------------------::::...............:=++**+-:::::=#%=          
                    #= .:::::::-----------------------------------------------------::::...........-=++*=-::-#%=        
           .+*=:   #+  ................:::::::--::------------------------------------------:::.........-+**=+@+        
          -@: :-+**@=:--...............................::::---------------------------------------::::.....-@*.         
          %:        -*%%%%%#**++++=-:..............................::::::------------------------------::..%+           
         =#   %@%##*=.  :-+++==+*%%%@@@%##*#++--:................................:::-------------------:::-@-           
          +#+#%-+%+.:++=- +:           ...:---==+**#*+++===:::............................::::--------::::=@:           
               *+:+=::::-#.          -=+++=-=::..         .:::-=+==*===--::.::.........................::.:@-           
             -%-+#-::::::==:--:.    %#########*: =%#**+-::--=:::   .%===++#+::=---=-==-==----:.............@=           
           .*+-#=:::::::::--::-=+: -%########+  -####*:   .*####%   -----=+   =-::..        ...::===+++++*+@#:...       
          .@==#-:::::::::::::::::+ -########=  =####*:   .*#####@            #######%%=-=+*==-:.          .--===%*      
         :%: :.::::::::::::::::::+ :@######-  =#####:    +#######           -%#######- .*####-..:-##**+=:       :@:     
        :@#*- .::::::::::::::::::+. @#####*.  -*####:    .+####%=           *######*. :*###*:   .*######%=   #*++=      
         *%.....:::::::::::::::::-+ *#######:  -#####-     +###%  +====---  @#####*. -*####:    *########:  #+          
        =@%@=  ::::::::=+++=::::::+.:%###*=.  -####*-     -###%. +-::::::#  @#####:  =*###+     +#######+  =@           
         =%-=.::::::::=+--++-::::::# =%#+:   +####-.     =####+ ==:::::::*  @######-  :####=     =######  .@-           
        *%:+:-::::::::::++-::::::::-+ .+:  .+####:     =*###%+ ==::::::::*. @#####+.  =####*.     +###*   #+            
        @%::-:::::::::::::::::::::::-+=. ::=+++*+::::-*#++=-  --:::::::::+. @##*-   .+####=     :*###*   **             
      -#: :::::::::::::::::::::::=+#======---:::.........:::-=-::::::::::== .===:  -####+.    .=###%-   +%              
     *@*+*%@#-:::::::::::::::::::-:#+=--::----::--------::::::::::::::::::+-.   .--==++#--:..-**+++.   +@+              
      .:+%*-.::::::::::::::::::::::-:::===-::-=-=====-:::::::::::::::::::::--=-::::.::::....  ... ::::*= =#+.           
       -#%**+===+-::::::::::::::::::::=:    .:      .:---=-==-===========--==--=----==*####*++-:::-::::::-.=%+          
            .+@%====-:::::::::::::::::-*-.    :--:.:.               ..:::::::::::::-----:.   .:=+::::.=#@@#*#%          
             :+@#=--::::::::::::::::::::-=+==:.     .::------------:..                  ...     *:.  :=+#@#             
            #@-..::::::::::::::::::::::::::::-=====-=--::.......:::---=-====++=======+===-=---==-::.  #@=:              
             :##=::::::::::::=*-:::::::::::::::::::::::---======---::::::::::::::::::::::::::::::::::: =@.              
                -@*- .::::::=#--=::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::. == *@              
                 =%%..::::::=--#-::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::: +@%%@              
                   :+*+-.:::::*=::::::::::::::::::::::::::--::::::::::::::::::::::::::::::::::::::::: @=             =++
                     .+@-:::::-=+::::::::::::::::::::::::-#-:::::::::::::::::::::::-+::::::::::.##*=.:@*          .+*-::
                   .*+: #-.::::--::::::::::::::::::::::::*+*:::::::::::::::::::::::=*:::::::=:.-@-.=#+@=        .+*-::::
                  -@:  #@@#-::::::::::::::::::::::::::::::%-:::::::::::::::::::::::=-:::--=*@%#%%    :-       :++-:::-::
                  %. .%@@@@@@#*=-:--:::--==+++++=---:::::::::::::::::::::::::::::::::::-@@@*=#:             .*=::--::+=:
                 -%  %@@@@@@@@@@@@@@@@@@%%%%%%%%%@%@@%%##*-:::::::::::::::::::::-*#%%#+#@@@@*:#+           .%-::-=++++%-
                 -@  @@@@@@@@@@@@@@@@@@@@@@@@@%%%%######%%@%%##*++=-::::--==+*%%@@@@@@@@@@@@@%:%:          .%-:::::::-*+
               =++::+@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%########%%%%%@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%=@           -=::::-=:::%

RARE DOTTAS: SEASON ONE
Twitter: @dotta
 */

// SPDX-License-Identifier: MIT
pragma solidity ^0.8.13;

import {ERC1155} from "openzeppelin-contracts/token/ERC1155/ERC1155.sol";
import {Ownable} from "openzeppelin-contracts/access/Ownable.sol";
import {ERC2981} from "openzeppelin-contracts/token/common/ERC2981.sol";
import {Strings} from "openzeppelin-contracts/utils/Strings.sol";
import {OperatorFilterer} from "./OperatorFilterer.sol";

contract RAREDOTTAS1 is
    ERC1155("RAREDOTTAS1"),
    ERC2981,
    OperatorFilterer,
    Ownable
{
    /// @notice once frozen, no more can be minted
    bool public frozen = false;

    constructor(string memory _uri) {
        _setURI(_uri);
    }

    function uri(
        uint256 tokenId
    ) public view virtual override returns (string memory) {
        return
            string(
                abi.encodePacked(super.uri(tokenId), Strings.toString(tokenId))
            );
    }

    function mint(
        address to,
        uint256 tokenId,
        uint256 amount,
        bytes memory data
    ) public onlyOwner {
        require(!frozen, "RAREDOTTAS1: Mint frozen");
        _mint(to, tokenId, amount, data);
    }

    function mintBatch(
        address to,
        uint256[] memory ids,
        uint256[] memory amounts,
        bytes memory data
    ) public onlyOwner {
        require(!frozen, "RAREDOTTAS1: Mint frozen");
        _mintBatch(to, ids, amounts, data);
    }

    function burn(uint256 id, uint256 amount) public {
        _burn(_msgSender(), id, amount);
    }

    function freeze() public onlyOwner {
        frozen = true;
    }

    function setURI(string calldata uri_) public onlyOwner {
        _setURI(uri_);
    }

    function setEnableOperatorRegistry(bool _enabled) public onlyOwner {
        _setEnableOperatorRegistry(_enabled);
    }

    function filterSubscribe(
        address operatorFilterRegistryAddress,
        address subscriptionOrRegistrantToCopy,
        bool subscribe
    ) public onlyOwner {
        _filterSubscribe(
            operatorFilterRegistryAddress,
            subscriptionOrRegistrantToCopy,
            subscribe
        );
    }

    function setDefaultRoyalty(
        address receiver,
        uint96 feeNumerator
    ) public onlyOwner {
        _setDefaultRoyalty(receiver, feeNumerator);
    }

    function setTokenRoyalty(
        uint256 tokenId,
        address receiver,
        uint96 feeNumerator
    ) public onlyOwner {
        _setTokenRoyalty(tokenId, receiver, feeNumerator);
    }

    /**
     * @dev See {IERC1155-setApprovalForAll}.
     *      In this example the added modifier ensures that the operator is allowed by the OperatorFilterRegistry.
     */
    function setApprovalForAll(
        address operator,
        bool approved
    ) public override onlyAllowedOperatorApproval(operator) {
        super.setApprovalForAll(operator, approved);
    }

    /**
     * @dev See {IERC1155-safeTransferFrom}.
     *      In this example the added modifier ensures that the operator is allowed by the OperatorFilterRegistry.
     */
    function safeTransferFrom(
        address from,
        address to,
        uint256 tokenId,
        uint256 amount,
        bytes memory data
    ) public override onlyAllowedOperator(from) {
        super.safeTransferFrom(from, to, tokenId, amount, data);
    }

    /**
     * @dev See {IERC1155-safeBatchTransferFrom}.
     *      In this example the added modifier ensures that the operator is allowed by the OperatorFilterRegistry.
     */
    function safeBatchTransferFrom(
        address from,
        address to,
        uint256[] memory ids,
        uint256[] memory amounts,
        bytes memory data
    ) public virtual override onlyAllowedOperator(from) {
        super.safeBatchTransferFrom(from, to, ids, amounts, data);
    }

    /**
     * @dev See {IERC165-supportsInterface}.
     */
    function supportsInterface(
        bytes4 interfaceId
    ) public view virtual override(ERC1155, ERC2981) returns (bool) {
        return
            ERC1155.supportsInterface(interfaceId) ||
            ERC2981.supportsInterface(interfaceId);
    }
}